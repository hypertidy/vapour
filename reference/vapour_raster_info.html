<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Raster information — vapour_raster_info • vapour</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Raster information — vapour_raster_info"><meta property="og:description" content="Return the basic structural metadata of a raster source understood by GDAL.
Subdatasets may be specified by number, starting at 1. See
vapour_sds_names for more."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vapour</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.8.8.9010</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/vapour.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/feature-access.html">feature-access</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hypertidy/vapour/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Raster information</h1>
    <small class="dont-index">Source: <a href="https://github.com/hypertidy/vapour/blob/HEAD/R/raster-info.R" class="external-link"><code>R/raster-info.R</code></a></small>
    <div class="hidden name"><code>vapour_raster_info.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Return the basic structural metadata of a raster source understood by GDAL.
Subdatasets may be specified by number, starting at 1. See
<a href="vapour_sds_names.html">vapour_sds_names</a> for more.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vapour_raster_info</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span>, sds <span class="op">=</span> <span class="cn">NULL</span>, min_max <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>data source string (i.e. file name or URL or database connection string)</p></dd>


<dt>...</dt>
<dd><p>currently unused</p></dd>


<dt>sds</dt>
<dd><p>a subdataset number, if necessary</p></dd>


<dt>min_max</dt>
<dd><p>logical, control computing min and max values in source ('FALSE' by default)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>list with vectors 'geotransform', 'dimXY', 'minmax', 'tilesXY', 'projection', 'bands', 'proj4', 'nodata_value',
'overviews', 'filelist' see sections in Details for more on each element</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>The structural metadata are</p>
<dl><dt>extent</dt>
<dd><p>the extent of the data, xmin, xmax, ymin, ymax - these are the lower left and upper right corners of pixels</p></dd>

<dt>geotransform</dt>
<dd><p>the affine transform</p></dd>

<dt>dimension</dt>
<dd><p>dimensions x-y, columns*rows</p></dd>

<dt>minmax</dt>
<dd><p>numeric values of the computed min and max from the first band (optional)</p></dd>

<dt>block</dt>
<dd><p>dimensions x-y of internal tiling scheme</p></dd>

<dt>projection</dt>
<dd><p>text version of map projection parameter string</p></dd>

<dt>bands</dt>
<dd><p>number of bands in the dataset</p></dd>

<dt>projstring</dt>
<dd><p>the proj string version of 'projection'</p></dd>

<dt>nodata_value</dt>
<dd><p>not implemented</p></dd>

<dt>overviews</dt>
<dd><p>the number and size of any available overviews</p></dd>

<dt>filelist</dt>
<dd><p>the list of files involved (may be none, and so will be a single NA character value)</p></dd>

<dt>datatype</dt>
<dd><p>the band type name, in GDAL form 'Byte', 'Int16', 'Float32', etc.</p></dd>


</dl><p>Note that the geotransform is a kind of obscure combination of the extent and dimension, I don't find it
useful and modern GDAL is moving away from needing it so much. Extent is more sensible and used in many places in
a straightforward way.</p>
<p>On access vapour functions will report on the existence of subdatasets while
defaulting to the first subdataset found.</p>
    </div>
    <div id="subdatasets">
    <h2>Subdatasets</h2>
    


<p>Some sources provide multiple data sets, where a dataset is described by a 2-
(or more) dimensional grid whose structure is described by the metadata
described above. Note that <em>subdataset</em> is a different concept to <em>band or
dimension</em>. Sources that may have multiple data sets are HDF4/HDF5 and
NetCDF, and they are loosely analogous to the concept of <em>layer</em> in GDAL
vector data. Variables are usually seen as distinct data but in GDAL and
related 2D-interpretations this concept is leveraged as a 3rd dimension (and
higher). In a GeoTIFF a third dimension might be implicit across bands, i.e.
to express time varying data and so each band is not properly a variable.
Similarly in NetCDF, the data may be any dimensional but there's only an
implicit link for other variables that exist in that same dimensional space.
When using GDAL you are always traversing this confusing realm.</p>
<p>If subdatasets are present but not specified the first is queried. The choice
of subdataset is analogous to the way that the <code>raster</code> package behaves, and
uses the argument <code>varname</code>. Variables in NetCDF correspond to subdatasets,
but a single data set might have multiple variables in different bands or in
dimensions, so this guide does not hold across various systems.</p>
    </div>
    <div id="the-geo-transform">
    <h2>The Geo Transform</h2>
    


<p>From <a href="https://gdal.org/user/raster_data_model.html" class="external-link">https://gdal.org/user/raster_data_model.html</a>.</p>
<p>The affine transform consists of six coefficients returned by
<code>GDALDataset::GetGeoTransform()</code> which map pixel/line coordinates into
georeferenced space using the following relationship:</p>
<p><code>Xgeo = GT(0) + Xpixel*GT(1) + Yline*GT(2)</code></p>
<p><code>Ygeo = GT(3) + Xpixel*GT(4) + Yline*GT(5)</code></p>
<p>They are</p><dl><dt>GT0, xmin</dt>
<dd><p>the x position of the lower left corner of the lower left pixel</p></dd>

<dt>GT1, xres</dt>
<dd><p>the scale of the x-axis, the width of the pixel in x-units</p></dd>

<dt>GT2, yskew</dt>
<dd><p>y component of the pixel width</p></dd>

<dt>GT3, ymax</dt>
<dd><p>the y position of the upper left corner of the upper left pixel</p></dd>

<dt>GT4, xskew</dt>
<dd><p>x component of the pixel height</p></dd>

<dt>GT5, yres</dt>
<dd><p>the scale of the y-axis, the height of the pixel in <em>negative</em> y-units</p></dd>


</dl><p>Please note that these coefficients are equivalent to the contents of a
<em>world file</em> but that the order is not the same and the world file uses cell
centre convention rather than edge.
<a href="https://en.wikipedia.org/wiki/World_file" class="external-link">https://en.wikipedia.org/wiki/World_file</a></p>
<p>Usually the skew components are zero, and so only four coefficients are
relevant and correspond to the offset and scale used to position the raster -
in combination with the number of rows and columns of data they provide the
spatial extent and the pixel size in each direction.  Very rarely a an actual
affine raster will be use with this <em>rotation</em> specified within the transform
coefficients.</p>
<p>Calculation of 'minmax' can take a significant amount of time, so it's not done by default. Use
'minmax = TRUE' to do it. (It does perform well, but may be prohibitive for very large or remote sources.)</p>
    </div>
    <div id="overviews">
    <h2>Overviews</h2>
    


<p>If there are no overviews this element will simply be a single-element vector
of value 0. If there are overviews, the first value will give the number of overviews and
their dimensions will be listed as pairs of x,y values.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>vapour_sds_info</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sst.tif"</span>, package <span class="op">=</span> <span class="st">"vapour"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">vapour_raster_info</span><span class="op">(</span><span class="va">f</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $geotransform</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 140.00000000   0.07000000   0.00000000 -39.99722207   0.00000000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [6]  -0.07000389</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $dimension</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 143 286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $dimXY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 143 286</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $minmax</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 271.350 289.859</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $block</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 143  14</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $projection</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "GEOGCRS[\"WGS 84\",\n    DATUM[\"World Geodetic System 1984\",\n        ELLIPSOID[\"WGS 84\",6378137,298.257223563,\n            LENGTHUNIT[\"metre\",1]]],\n    PRIMEM[\"Greenwich\",0,\n        ANGLEUNIT[\"degree\",0.0174532925199433]],\n    CS[ellipsoidal,2],\n        AXIS[\"geodetic latitude (Lat)\",north,\n            ORDER[1],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n        AXIS[\"geodetic longitude (Lon)\",east,\n            ORDER[2],\n            ANGLEUNIT[\"degree\",0.0174532925199433]],\n    ID[\"EPSG\",4326]]"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $bands</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $projstring</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "+proj=longlat +datum=WGS84 +no_defs"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $nodata_value</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] -3.4e+38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $overviews</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $filelist</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "/Users/runner/work/_temp/Library/vapour/extdata/sst.tif"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $datatype</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "Float32"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $extent</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 140.00000 150.01000 -60.01833 -39.99722</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $subdatasets</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> NULL</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

