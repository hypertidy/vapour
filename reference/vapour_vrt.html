<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Virtual raster — vapour_vrt • vapour</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Virtual raster — vapour_vrt"><meta property="og:description" content="Simple VRT creation of a GDAL virtual raster. The data source string is
augmented by input of other optional arguments. That means it overrides
their values provided by the source data, or stands in place of this information if
it is missing."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vapour</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/vapour.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/feature-access.html">feature-access</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hypertidy/vapour/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Virtual raster</h1>
    <small class="dont-index">Source: <a href="https://github.com/hypertidy/vapour/blob/HEAD/R/vapour_vrt.R" class="external-link"><code>R/vapour_vrt.R</code></a></small>
    <div class="hidden name"><code>vapour_vrt.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Simple VRT creation of a GDAL virtual raster. The data source string is
<strong>augmented</strong> by input of other optional arguments. That means it <strong>overrides</strong>
their values provided by the source data, or stands in place of this information if
it is missing.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vapour_vrt</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  extent <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  projection <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sds <span class="op">=</span> <span class="fl">1L</span>,</span>
<span>  bands <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geolocation <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  relative_to_vrt <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>data source name, filepath, url, database connection string, or VRT text</p></dd>


<dt>extent</dt>
<dd><p>(optional) numeric extent, xmin,xmax,ymin,ymax</p></dd>


<dt>projection</dt>
<dd><p>(optional) character string, projection string ("auth:code", proj4, or WKT, or anything understood by PROJ, see Details)</p></dd>


<dt>sds</dt>
<dd><p>which subdataset to select from a source with more than one</p></dd>


<dt>bands</dt>
<dd><p>(optional) which band/s to include from the source</p></dd>


<dt>geolocation</dt>
<dd><p>vector of 2 dsn to longitude, latitude geolocation array sources</p></dd>


<dt>...</dt>
<dd><p>ignored</p></dd>


<dt>relative_to_vrt</dt>
<dd><p>default <code>FALSE</code>, if <code>TRUE</code> input strings that identify as files on the system are left as-is (by default they are made absolute at the R level)</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>VRT character string (for use by GDAL-capable tools, i.e. reading raster)</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Create a GDAL data source string (to be used like a filename) with various helpers.
VRT stands for 'ViRTual'. A VRT string then acts as a representative of a data source for
further use (to read or warp it).</p>
<p>An input string will be converted to a single subdataset, use 'sds' argument to select.</p>
<p>If 'extent', 'projection' is provided this is applied to override the source's extent and/or projection.
(These might be invalid, or missing, so we facilitate correcting this).</p>
<p>If 'bands' is provided this is used to select a set of bands (numbered from 1), which might be repeated, or
in any order and contain repetitions.</p>
<p><code>vapour_vrt()</code> is vectorized, it will return multiple VRT strings for multiple inputs in
a "length &gt; 1" character vector. These are all independent, this is different to the function
<code><a href="vapour_warp_raster.html">vapour_warp_raster()</a></code> where multiple inputs are merged (possibly by sequential overlapping).</p>
    </div>
    <div id="rationale">
    <h2>Rationale</h2>
    


<p>For a raster, the basic essentials we can specify or modify for a source  are</p><ol><li><p>the source, 2) the extent, 3) the projection 4) what subdataset (these are
variables from NetCDF and the like that contain multiple datasets) and 5)
which band/s to provided. For extent and projection we are simply providing
or correcting complete information about how to interpret the georeferencing,
with subdatasets and bands this is more like a query of which ones we want.
If we only wanted band 5, then the output data would have one band only (and
we we read it we need <code>band = 1</code>).</p></li>
</ol><p>We don't provide ability override the dimension, but that is possible as
well. More features may come with a 'VRTBuilder' interface.</p>
    </div>
    <div id="projections">
    <h2>Projections</h2>
    

<p>Common inputs for <code>projection</code> are WKT variants, "AUTH:CODE"s e.g.
"EPSG:3031", the "OGC:CRS84" for long,lat WGS84, "ESRI:&lt;code&gt;" and other
authority variants, and datum names such as 'WGS84','NAD27' recognized by
PROJ itself.</p>
<p>See the following links to GDAL and PROJ documentation:</p>
<p><a href="https://proj.org/development/reference/functions.html#c.proj_create_crs_to_crs" class="external-link">PROJ documentation: c.proj_create_crs_to_crs</a></p>
<p><a href="https://proj.org/development/reference/functions.html#c.proj_create" class="external-link">PROJ documentation: c.proj_create</a></p>
<p><a href="https://gdal.org/doxygen/classOGRSpatialReference.html#aec3c6a49533fe457ddc763d699ff8796" class="external-link">GDAL documentation: SetFromUserInput</a></p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">tif</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sst.tif"</span>, package <span class="op">=</span> <span class="st">"vapour"</span>, mustWork <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">vapour_vrt</span><span class="op">(</span><span class="va">tif</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "&lt;VRTDataset rasterXSize=\"143\" rasterYSize=\"286\"&gt;\n  &lt;SRS dataAxisToSRSAxisMapping=\"2,1\"&gt;GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Latitude\",NORTH],AXIS[\"Longitude\",EAST],AUTHORITY[\"EPSG\",\"4326\"]]&lt;/SRS&gt;\n  &lt;GeoTransform&gt;  1.4000000000000000e+02,  6.9999999999999937e-02,  0.0000000000000000e+00, -3.9997222067892665e+01,  0.0000000000000000e+00, -7.0003889104950298e-02&lt;/GeoTransform&gt;\n  &lt;Metadata&gt;\n    &lt;MDI key=\"AREA_OR_POINT\"&gt;Area&lt;/MDI&gt;\n  &lt;/Metadata&gt;\n  &lt;Metadata domain=\"IMAGE_STRUCTURE\"&gt;\n    &lt;MDI key=\"COMPRESSION\"&gt;LZW&lt;/MDI&gt;\n    &lt;MDI key=\"INTERLEAVE\"&gt;BAND&lt;/MDI&gt;\n  &lt;/Metadata&gt;\n  &lt;VRTRasterBand dataType=\"Float32\" band=\"1\" blockYSize=\"14\"&gt;\n    &lt;Metadata&gt;\n      &lt;MDI key=\"STATISTICS_MAXIMUM\"&gt;289.859&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_MEAN\"&gt;279.8360951673&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_MINIMUM\"&gt;271.35&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_STDDEV\"&gt;4.9558170498586&lt;/MDI&gt;\n    &lt;/Metadata&gt;\n    &lt;NoDataValue&gt;-3.399999952144364e+38&lt;/NoDataValue&gt;\n    &lt;ColorInterp&gt;Gray&lt;/ColorInterp&gt;\n    &lt;SimpleSource&gt;\n      &lt;SourceFilename relativeToVRT=\"0\"&gt;/Users/runner/work/_temp/Library/vapour/extdata/sst.tif&lt;/SourceFilename&gt;\n      &lt;SourceBand&gt;1&lt;/SourceBand&gt;\n      &lt;SourceProperties RasterXSize=\"143\" RasterYSize=\"286\" DataType=\"Float32\" BlockXSize=\"143\" BlockYSize=\"14\" /&gt;\n      &lt;SrcRect xOff=\"0\" yOff=\"0\" xSize=\"143\" ySize=\"286\" /&gt;\n      &lt;DstRect xOff=\"0\" yOff=\"0\" xSize=\"143\" ySize=\"286\" /&gt;\n    &lt;/SimpleSource&gt;\n  &lt;/VRTRasterBand&gt;\n&lt;/VRTDataset&gt;\n"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">vapour_vrt</span><span class="op">(</span><span class="va">tif</span>, bands <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "&lt;VRTDataset rasterXSize=\"143\" rasterYSize=\"286\"&gt;\n  &lt;SRS dataAxisToSRSAxisMapping=\"2,1\"&gt;GEOGCS[\"WGS 84\",DATUM[\"WGS_1984\",SPHEROID[\"WGS 84\",6378137,298.257223563,AUTHORITY[\"EPSG\",\"7030\"]],AUTHORITY[\"EPSG\",\"6326\"]],PRIMEM[\"Greenwich\",0,AUTHORITY[\"EPSG\",\"8901\"]],UNIT[\"degree\",0.0174532925199433,AUTHORITY[\"EPSG\",\"9122\"]],AXIS[\"Latitude\",NORTH],AXIS[\"Longitude\",EAST],AUTHORITY[\"EPSG\",\"4326\"]]&lt;/SRS&gt;\n  &lt;GeoTransform&gt;  1.4000000000000000e+02,  6.9999999999999937e-02,  0.0000000000000000e+00, -3.9997222067892665e+01,  0.0000000000000000e+00, -7.0003889104950298e-02&lt;/GeoTransform&gt;\n  &lt;Metadata&gt;\n    &lt;MDI key=\"AREA_OR_POINT\"&gt;Area&lt;/MDI&gt;\n  &lt;/Metadata&gt;\n  &lt;Metadata domain=\"IMAGE_STRUCTURE\"&gt;\n    &lt;MDI key=\"COMPRESSION\"&gt;LZW&lt;/MDI&gt;\n    &lt;MDI key=\"INTERLEAVE\"&gt;BAND&lt;/MDI&gt;\n  &lt;/Metadata&gt;\n  &lt;VRTRasterBand dataType=\"Float32\" band=\"1\" blockYSize=\"14\"&gt;\n    &lt;Metadata&gt;\n      &lt;MDI key=\"STATISTICS_MAXIMUM\"&gt;289.859&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_MEAN\"&gt;279.8360951673&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_MINIMUM\"&gt;271.35&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_STDDEV\"&gt;4.9558170498586&lt;/MDI&gt;\n    &lt;/Metadata&gt;\n    &lt;NoDataValue&gt;-3.399999952144364e+38&lt;/NoDataValue&gt;\n    &lt;ColorInterp&gt;Gray&lt;/ColorInterp&gt;\n    &lt;SimpleSource&gt;\n      &lt;SourceFilename relativeToVRT=\"0\"&gt;/Users/runner/work/_temp/Library/vapour/extdata/sst.tif&lt;/SourceFilename&gt;\n      &lt;SourceBand&gt;1&lt;/SourceBand&gt;\n      &lt;SourceProperties RasterXSize=\"143\" RasterYSize=\"286\" DataType=\"Float32\" BlockXSize=\"143\" BlockYSize=\"14\" /&gt;\n      &lt;SrcRect xOff=\"0\" yOff=\"0\" xSize=\"143\" ySize=\"286\" /&gt;\n      &lt;DstRect xOff=\"0\" yOff=\"0\" xSize=\"143\" ySize=\"286\" /&gt;\n    &lt;/SimpleSource&gt;\n  &lt;/VRTRasterBand&gt;\n  &lt;VRTRasterBand dataType=\"Float32\" band=\"2\" blockYSize=\"14\"&gt;\n    &lt;Metadata&gt;\n      &lt;MDI key=\"STATISTICS_MAXIMUM\"&gt;289.859&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_MEAN\"&gt;279.8360951673&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_MINIMUM\"&gt;271.35&lt;/MDI&gt;\n      &lt;MDI key=\"STATISTICS_STDDEV\"&gt;4.9558170498586&lt;/MDI&gt;\n    &lt;/Metadata&gt;\n    &lt;NoDataValue&gt;-3.399999952144364e+38&lt;/NoDataValue&gt;\n    &lt;ColorInterp&gt;Gray&lt;/ColorInterp&gt;\n    &lt;SimpleSource&gt;\n      &lt;SourceFilename relativeToVRT=\"0\"&gt;/Users/runner/work/_temp/Library/vapour/extdata/sst.tif&lt;/SourceFilename&gt;\n      &lt;SourceBand&gt;1&lt;/SourceBand&gt;\n      &lt;SourceProperties RasterXSize=\"143\" RasterYSize=\"286\" DataType=\"Float32\" BlockXSize=\"143\" BlockYSize=\"14\" /&gt;\n      &lt;SrcRect xOff=\"0\" yOff=\"0\" xSize=\"143\" ySize=\"286\" /&gt;\n      &lt;DstRect xOff=\"0\" yOff=\"0\" xSize=\"143\" ySize=\"286\" /&gt;\n    &lt;/SimpleSource&gt;\n  &lt;/VRTRasterBand&gt;\n&lt;/VRTDataset&gt;\n"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer></div>

  


  

  </body></html>

