<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Raster warper (reprojection) — vapour_warp_raster • vapour</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Raster warper (reprojection) — vapour_warp_raster"><meta property="og:description" content="Read a window of data from a GDAL raster source through a warp specification.
The warp specification is provided by 'extent', 'dimension', and 'projection'
properties of the transformed output."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">vapour</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.9.3.9002</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/vapour.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/feature-access.html">feature-access</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/hypertidy/vapour/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Raster warper (reprojection)</h1>
    <small class="dont-index">Source: <a href="https://github.com/hypertidy/vapour/blob/HEAD/R/raster-input.R" class="external-link"><code>R/raster-input.R</code></a></small>
    <div class="hidden name"><code>vapour_warp_raster.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Read a window of data from a GDAL raster source through a warp specification.
The warp specification is provided by 'extent', 'dimension', and 'projection'
properties of the transformed output.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vapour_warp_raster</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  bands <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  extent <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dimension <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  projection <span class="op">=</span> <span class="st">""</span>,</span>
<span>  set_na <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  source_projection <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  source_extent <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  resample <span class="op">=</span> <span class="st">"near"</span>,</span>
<span>  silent <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  band_output_type <span class="op">=</span> <span class="st">""</span>,</span>
<span>  warp_options <span class="op">=</span> <span class="st">""</span>,</span>
<span>  transformation_options <span class="op">=</span> <span class="st">""</span>,</span>
<span>  open_options <span class="op">=</span> <span class="st">""</span>,</span>
<span>  options <span class="op">=</span> <span class="st">""</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p>vector of data source names (file name or URL or database connection string)</p></dd>


<dt>bands</dt>
<dd><p>index of band/s to read (1-based), may be new order or replicated, or NULL (all bands used, the default)</p></dd>


<dt>extent</dt>
<dd><p>extent of the target warped raster 'c(xmin, xmax, ymin, ymax)'</p></dd>


<dt>dimension</dt>
<dd><p>dimensions in pixels of the warped raster (x, y)</p></dd>


<dt>projection</dt>
<dd><p>projection of warped raster (in Well-Known-Text, or any projection string accepted by GDAL)</p></dd>


<dt>set_na</dt>
<dd><p>NOT IMPLEMENTED logical, should 'NODATA' values be set to <code>NA</code></p></dd>


<dt>source_projection</dt>
<dd><p>optional, override or augment the projection of the source (in Well-Known-Text, or any projection string accepted by GDAL)</p></dd>


<dt>source_extent</dt>
<dd><p>extent of the source raster, used to override/augment incorrect source metadata</p></dd>


<dt>resample</dt>
<dd><p>resampling method used (see details in <a href="vapour_read_raster.html">vapour_read_raster</a>)</p></dd>


<dt>silent</dt>
<dd><p><code>TRUE</code> by default, set to <code>FALSE</code> to report messages</p></dd>


<dt>...</dt>
<dd><p>unused</p></dd>


<dt>band_output_type</dt>
<dd><p>numeric type of band to apply (else the native type if '') can be one of 'Byte', 'Int32', or 'Float64' but see details in <code><a href="vapour_read_raster.html">vapour_read_raster()</a></code></p></dd>


<dt>warp_options</dt>
<dd><p>character vector of options, as in gdalwarp -wo - see Details</p></dd>


<dt>transformation_options</dt>
<dd><p>character vector of options, as in gdalwarp -to see Details</p></dd>


<dt>open_options</dt>
<dd><p>character vector of options, as in gdalwarp -oo - see Details</p></dd>


<dt>options</dt>
<dd><p>character vectors of options as per the gdalwarp command line</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>list of vectors (only 1 for 'band') of numeric values, in raster order</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Any bands may be read, including repeats.</p>
<p>This function is not memory safe, the source is left on disk but the output
raster is all computed in memory so please be careful with very large values
for 'dimension'. <code>1000 * 1000 * 8</code> for 1000 columns, 1000 rows and floating
point double type will be 8Mb.</p>
<p>There's control over the output type, and is auto-detected from the source
(raw/Byte, integer/Int32, numeric/Float64) or can be set with
'band_output_type'.</p>
<p>'projection' refers to any projection string for a CRS understood by GDAL.
This includes the full Well-Known-Text specification of a coordinate
reference system, PROJ strings, "AUTH:CODE" types, and others. See
<code><a href="vapour_srs_wkt.html">vapour_srs_wkt()</a></code> for conversion from PROJ.4 string to WKT, and
<code><a href="vapour_raster_info.html">vapour_raster_info()</a></code> and <code><a href="vapour_layer_info.html">vapour_layer_info()</a></code> for various formats
available from a data source. Any string accepted by GDAL may be used for
'projection' or 'source_projection', including EPSG strings, PROJ4 strings,
and file names. Note that this argument was named 'wkt' up until version
0.8.0.</p>
<p>'extent' is the four-figure xmin,xmax,ymin,ymax outer corners of corner pixels</p>
<p>'dimension' is the pixel dimensions of the output, x (ncol) then y (nrow).</p>
<p>Options for missing data are not yet handled, just returned as-is. Note that
there may be regions of "zero data" in a warped output, separate from
propagated missing "NODATA" values in the source.</p>
<p>Argument 'source_projection' may be used to assign the projection of the
source, 'source_extent' to assign the extent of the source. Sometimes both
are required. Note, this is now better done by creating 'VRT', see <code><a href="vapour_vrt.html">vapour_vrt()</a></code>
for assigning the source projection, extent, and some other options.</p>
<p>If multiple sources are specified via 'x' and either 'source_projection' or
'source_extent' are provided, these are applied to every source even if they
have valid values already. If this is not sensible please use VRT to wrap the
multiple sources first.</p>
<p>Wild combinations of 'source_extent' and/or 'extent' may be used for
arbitrary flip orientations, scale and offset. For expert usage only. Old
versions allowed transform input for target and source but this is now
disabled (maybe we'll write a new wrapper for that).</p>
    </div>
    <div id="options">
    <h2>Options</h2>
    


<p>The various options are convenience arguments  for 'warp options -wo',
transformation options -to', 'open options -oo', and 'options' for any other
arguments in gdalwarp. There are no 'creation options -co' or 'dataset output
options -doo', because these are not supported by the MEM driver.</p>
<p>All 'warp_options' are paired with a '-wo' declaration and similarly for '-to', and '-oo',
this is purely a convenience, since 'options' itself can be used for these as well but we recommend using
the individual arguments.
An example for warp options is  <code>warp_options = c("SAMPLE_GRID=YES", "SAMPLE_STEPS=30")</code> and one for
general arguments might be
'options = c("-ovr", "AUTO", "-nomd", "-cutline", "/path/to/cut.gpkg", "-crop_to_cutline")'.  If they would
be separated by spaces on the command line then include as separate elements in the options character vector.</p>
<p>See <a href="https://gdal.org/api/gdalwarp_cpp.html#_CPPv4N15GDALWarpOptions16papszWarpOptionsE" class="external-link">GDALWarpOptions</a> for '-wo'.</p>
<p>See <a href="https://gdal.org/api/gdal_alg.html#_CPPv432GDALCreateGenImgProjTransformer212GDALDatasetH12GDALDatasetHPPc" class="external-link">GDAL transformation options</a> for '-to'.</p>
<p>See <a href="https://gdal.org/programs/gdalwarp.html" class="external-link">GDALWARP command line app</a> for further details.</p>
<p>Note we already apply the following gdalwarp arguments based on input R
arguments to this function.</p>
<dl><dt>-of</dt>
<dd><p>MEM is hardcoded, but may be extended in future</p></dd>

<dt>-t_srs</dt>
<dd><p>set via 'projection'</p></dd>

<dt>-s_srs</dt>
<dd><p>set via 'source_projection'</p></dd>

<dt>-te</dt>
<dd><p>set via 'extent'</p></dd>

<dt>-ts</dt>
<dd><p>set via 'dimension'</p></dd>

<dt>-r</dt>
<dd><p>set via 'resample'</p></dd>

<dt>-ot</dt>
<dd><p>set via 'band_output_type'</p></dd>

<dt>-te_srs</dt>
<dd><p>not supported</p></dd>

<dt>-a_ullr</dt>
<dd><p>(not a gdalwarp argument, but we do analog) set via 'source_extent' use <code><a href="vapour_vrt.html">vapour_vrt()</a></code> instead</p></dd>


</dl><p>In future all 'source_*' arguments may be deprecated in favour of
augmentation by 'vapour_vrt()'.</p>
<p>Common inputs for <code>projection</code> are WKT variants, 'AUTH:CODE's e.g.
'EPSG:3031', the 'OGC:CRS84' for lon,lat WGS84, 'ESRI:code' and other
authority variants, and datum names such as 'WGS84','NAD27' recognized by
PROJ itself.</p>
<p>See help for 'SetFromUserInput' in 'OGRSpatialReference', and
'proj_create_crs_to_crs'.</p>
<p><a href="https://proj.org/development/reference/functions.html#c.proj_create_crs_to_crs" class="external-link">c.proj_create_crs_to_crs</a></p>
<p><a href="https://proj.org/development/reference/functions.html#c.proj_create" class="external-link">c.proj_create</a></p>
<p><a href="https://gdal.org/doxygen/classOGRSpatialReference.html#aec3c6a49533fe457ddc763d699ff8796" class="external-link">SetFromUserInput</a></p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>vapour_read_raster vapour_read_raster_raw vapour_read_raster_int vapour_read_raster_dbl vapour_read_raster_chr vapour_read_raster_hex</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fl">4e5</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"sst.tif"</span>, package <span class="op">=</span> <span class="st">"vapour"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">prj</span> <span class="op">&lt;-</span> <span class="st">"+proj=aeqd +lon_0=147 +lat_0=-42"</span></span></span>
<span class="r-in"><span><span class="va">vals</span> <span class="op">&lt;-</span> <span class="fu">vapour_warp_raster</span><span class="op">(</span><span class="va">f</span>, extent <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="va">b</span>, <span class="va">b</span>, <span class="op">-</span><span class="va">b</span>, <span class="va">b</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             dimension <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">186</span>, <span class="fl">298</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>                             bands <span class="op">=</span> <span class="fl">1</span>, </span></span>
<span class="r-in"><span>                             projection <span class="op">=</span> <span class="fu"><a href="vapour_srs_wkt.html">vapour_srs_wkt</a></span><span class="op">(</span><span class="va">prj</span><span class="op">)</span>, </span></span>
<span class="r-in"><span>                             warp_options <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"SAMPLE_GRID=YES"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>                             </span></span>
<span class="r-in"><span>                             </span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/image.html" class="external-link">image</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="va">b</span>, <span class="va">b</span>, length.out <span class="op">=</span> <span class="fl">187</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq</a></span><span class="op">(</span><span class="op">-</span><span class="va">b</span>, <span class="va">b</span>, length.out <span class="op">=</span> <span class="fl">298</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    z <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="va">vals</span>, use.names <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>, <span class="fl">186</span><span class="op">)</span><span class="op">[</span>,<span class="fl">298</span><span class="op">:</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span>, asp <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="vapour_warp_raster-1.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Sumner.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

